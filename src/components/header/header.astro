---
import "./header.css";

import SwitchTheme from "../switch-theme/switch-theme.astro";

import { t } from "../../locales.json";
const { pathname } = Astro.url;
const locale = pathname === "/" ? "es" : pathname.split("/")[1];
---

<header class="header">
  <nav class="navbar">
    <button id="open-nav" aria-expanded="false">
      <svg viewBox="0 0 24 24" width="24" height="24" role="presentation">
        <use xlink:href="/images/icons.svg#menu"></use>
      </svg>
      <span class="sr-only">Men√∫</span>
    </button>
    <ul class="navbar__pages">
      {
        t[locale].components.navigation.map(({ href, name, external }) => {
          return (
            <li>
              <a
                href={href}
                target={external ? "_blank" : ""}
                rel={external ? "noopener nofollow" : ""}
              >
                {name}
              </a>
            </li>
          );
        })
      }
    </ul>
  </nav>

  <SwitchTheme />
</header>

<script>
  const $Menu = document.querySelector(".navbar button#open-nav");

  $Menu.addEventListener("click", () => {
    const currentAriaExpandedValue = $Menu.getAttribute("aria-expanded");
    const newAriaExpandedValue =
      currentAriaExpandedValue === "false" ? "true" : "false";
    $Menu.setAttribute("aria-expanded", newAriaExpandedValue);
  });
</script>
